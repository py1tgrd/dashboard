<!-- TODO

Move copy button to top right - to share  <i class="fas fa-share"></i>
On hover - xl inputs

QR code sharing!!


Height is consistent (max height 700), but
Drop down color light grey (not blue) - cannot do easily with control (rendered by OS - can make custom with divs = pain!)

FAB not showing on Android 
Height of header still looks too big
Sticky header
Make Go move to next item
On mobile version, clicking on input selects whole input
On select tab, set autofocus to top variable
Think about how button clicking will work







Wishlist
make more keyboard friendly - enter key, and other shortcut keys
Consider born in vs.  Age now

 -->




<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="theme-color" content="#6002EE">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="#6002EE">
	
	
	<link rel="stylesheet" href="./styles.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script  type="text/javascript" src="./script.js"/></script>
	<script  type="text/javascript" src="./qrcode.js"/></script>
	<script  type="text/javascript" src="./jquery.min.js"/></script>
	<title>Annuity factor</title>
</head>

<body onload="displayAnnuityInputs()">
<div class="container">
<div class="card_container">

<div class="wrapper" id="wrapper">
	
	<div class="card card1" id="home_screen">
	
	<div class="card_header" id="card_header_front">
	<div class="dropdown">
		<button class="fa fa-ellipsis-v" id="menubutton"></button>
		<div class="dropdown-content" id="dropdown-content">
			<a href="#" id="copybutton"><i class="fa fa-copy dropdown-icon"></i>Copy inputs to clipboard</a>
			<a href="#" onclick='alert("Work in progress")'><i class="fa fa-share-alt dropdown-icon"></i>Share</a>
			<a href="#" onclick='alert("Work in progress")'><i class="fa fa-camera  dropdown-icon"></i>Scan QR code</a>
			<a href="#" id="generate-qr-click"><i class="fa fa-qrcode dropdown-icon"></i>Generate QR code</a>
			<a href="#" id="close-menu"><i class="fa fa-window-close dropdown-icon"></i>Close</a>
		</div>
	</div>
	
	
		Annuity factor
		<div class="card_item result" id="annuity_result">...</div>
		<button class="fab change" id="calculateAnnuity"></button>
		<button class="explore">...</button>
	</div>
	<div class="card_body">
		
		<div class="card_item home_screen" id="screen2">
		<div class="card_heading">Member scenario </div>
		
		<div class="card_subheading member" id="member_scenario"> 
		Male born in 1965, Joint life annuity from 60
		</div>
		<i class="arrow right"></i>
		</div>
		<div class="card_item home_screen" id="screen3">
			<div class="card_heading">Financials </div>
			<div class="card_subheading" id="financials">
			Discount rate: 4.50%<br>
			Pension increases: 3.75%
			</div>
		<i class="arrow right"></i>
		</div>
		<div class="card_item home_screen" id="screen4">
			<div class="card_heading">Mortality (Male)</div>
			<div class="card_subheading" id="Male_Mortality"> 
			100% of S2PA YoB CMI_2017 L=1.5% Sk=7.5
			</div>
			<i class="arrow right"></i>
		</div>
			<div class="card_item home_screen" id="screen5">
			<div class="card_heading">Mortality (Female) </div>
			<div class="card_subheading" id="Female_Mortality"> 
			100% of S2PA YoB CMI_2017 L=1.25% Sk=7.5		
			</div>
			<i class="arrow right"></i>
		</div>
		<div class="card_item home_screen" id="screen6">
			<div class="card_heading">Other</div>
			<div class="card_subheading" id="Other"> 
			Spouses proportion: 50%<br>
			Proportion married: 100% (M) / 100% (F)<br>	
			Males older by: 3 years <br>
			Guarantee: 5 years <br>
			Frequency: 12 <br>
			In advance: Yes
			</div>
			<i class="arrow right"></i>
		</div>	
		<!-- <button id="copybutton">CLICK</button> -->
		
	</div>
	
	
	<!-- <input type="submit" value="UPDATE" class="btn" id="btn_update_1"> -->

	<!--<div class="card">
	Stuff goes here
	</div>
	-->
	</div>
<!-- End of card -->	


<!-- Card screen start -->
<div class="card card2">
	<div class="card_header" id="screen2_home">&#8592; Member scenario</div>
	<div class="card_body">
	
	<div class="card_item">
	<div class="card_heading">Gender</div>
		<div class="card_subheading"> 
		
		<label class="radio_container">
			<input type="radio" name="sex" value=0 checked>
			<div class="radio_mark">Male</div>
		</label>
		
		<label class="radio_container">
			<input type="radio" name="sex" value=1>
			<div class="radio_mark">Female</div>
		</label>
		</div>		
	</div>
	
	<div class="card_item">
	<div class="card_heading">Born in</div>
		<div class="card_subheading"> 
		<input type="number" id="YOB" value=1965 class="text_Input">
		</div>
		<div id="YOB_detail">Aged 54 in 2019</div>
	</div>
	
	<div class="card_item">
	<div class="card_heading">Receiving a</div>
		<div class="card_subheading"> 
			<select id="annuityType">
				<option value="0">Single life annuity</option>
				<option value="1">Reversionary annuity</option>
				<option value="2" selected>Joint life annuity</option>
			</select>	
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">From age</div>
		<div class="card_subheading"> 
		<input type="number" id="age" value=65 class="text_Input">
		</div>	
	</div>
	
	
		<!-- <input type="submit" value="UPDATE" class="btn" id="btn_update_2">	 -->
	
</div>
</div>
<!-- End of card -->


<!-- Card screen start -->
<div class="card card3">
<div class="card_header" id="screen3_home">&#8592; Financials</div>
	<div class="card_body">
	<div class="card_item">
	<div class="card_heading">Discount rate</div>
		<div class="card_subheading"> 
			<div class="percentage_holder">
				<input type="number" id="Int" value=4 step=0.05 class="text_Input pc_Input">
			<span class="percentagePadding">%</span>	
			</div>
		</div>	
	</div>
	<div class="card_item">
	<div class="card_heading">Pension increases</div>
		<div class="card_subheading"> 
			<div class="percentage_holder">
				<input type="number" id="Esc" value=2 step=0.05 min="0" class="text_Input pc_Input">
			<span class="percentagePadding">%</span>	
			</div>
	
		</div>	
	</div>
		<!-- <input type="submit" value="UPDATE" class="btn" id="btn_update_3">	 -->
	
	</div>
</div>
<!-- End of card -->

<!-- Card screen start -->
<div class="card card4">
<div class="card_header" id="screen4_home">&#8592; Mortality (Male)</div>
	<div class="card_body">
	
	<div class="card_item">
	<div class="card_heading">Qx</div>
		<div class="card_subheading"> 
			<div class="percentage_holder">
				<input type="number" id="Qx_M" value=100 min="0" max="200" class="text_Input pc_Input">
				<span class="percentagePadding">%</span>	
			</div>
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Base table</div>
		<div class="card_subheading"> 
				<select id="mortM">
					<option value="S1PMA" class="text_Input">S1PMA</option>
					<option value="S1NMA" class="text_Input">S1NMA</option>
					<option value="S2PMA" class="text_Input" selected>S2PMA</option>
					<option value="S2NMA" class="text_Input">S2NMA</option>
					<option value="S3PMA" class="text_Input">S3PMA</option>
					<option value="S3NMA" class="text_Input">S3NMA</option>
				</select>
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Age rating</div>
		<div class="card_subheading"> 
		<input type="number" id="AgeRating_M" value=0 min="-10" max="10" step="0.5" class="text_Input">
		</div>	
	</div>
	
	<div class="card_item">
		<div class="card_heading">Birth or Calendar year</div>
		<div class="card_subheading"> 
		
		<label class="radio_container">
			<input type="radio" name="YearCalendarM" value="B" checked>
			<div class="radio_mark">Birth</div>
		</label>
		
		<label class="radio_container">
			<input type="radio" name="YearCalendarM" value="C">
			<div class="radio_mark">Calendar</div>
		</label>
		</div>		
	</div>	
	
	<div class="card_item">
	<div class="card_heading">Projected using CMI</div>
		<div class="card_subheading"> 
				<select id="ImpModelYear_M">
					<option value="2015">2015</option>
					<option value="2016">2016</option>
					<option value="2017" selected>2017</option>
					<option value="2018">2018</option>
				</select>
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Long Term Rate</div>
		<div class="card_subheading"> 
				<select id="ImpModelLTT_M">
					<option value=1>1%</option>
					<option value=1.25>1.25%</option>
					<option value=1.5 selected>1.5%</option>
					<option value=1.75>1.75%</option>
				</select>
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Smoothing factor</div>
		<div class="card_subheading"> 
				<select id="ImpModelSk_M">
					<option value=6.5>6.5</option>
					<option value=7>7</option>
					<option value=7.5 selected>7.5</option>
					<option value=8>8</option>
				</select>
		</div>	
	</div>	
	
	<div class="card_item">
	<div class="card_heading">Initial Addition</div>
		<div class="card_subheading"> 
				<select id="ImpModelA_M">
					<option value=0 selected>0</option>
					<option value=0.25>0.25</option>
					<option value=0.5>0.5</option>
					<option value=0.75>0.75</option>
					<option value=1>1</option>
				</select>
		</div>	
	</div>

	
		<!-- <input type="submit" value="UPDATE" class="btn" id="btn_update_4">	 -->
	
	</div>
</div>
<!-- End of card -->	
		
		
<!-- Card screen start -->
<div class="card card5">
<div class="card_header" id="screen5_home">&#8592; Mortality (Female)</div>
	<div class="card_body">
	
	<div class="card_item">
	<div class="card_heading">Qx</div>
		<div class="card_subheading">
			<div class="percentage_holder">
				<input type="number" id="Qx_F" value=100 min="0" max="200" class="text_Input pc_Input">
				<span class="percentagePadding">%</span>	
			</div>
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Base table</div>
		<div class="card_subheading"> 
				<select id="mortF">
					<option value="S1PFA" class="text_Input">S1PFA</option>
					<option value="S1NFA" class="text_Input">S1NFA</option>
					<option value="S2PFA" class="text_Input" selected>S2PFA</option>
					<option value="S2NFA" class="text_Input">S2NFA</option>
					<option value="S3PFA" class="text_Input">S3PFA</option>
					<option value="S3NFA" class="text_Input">S3NFA</option>
				</select>
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Age rating</div>
		<div class="card_subheading"> 
		<input type="number" id="AgeRating_F" value=0 min="-10" max="10" step="0.5" class="text_Input">
		</div>	
	</div>
	
		<div class="card_item">
		<div class="card_heading">Birth or Calendar year</div>
		<div class="card_subheading"> 
		
		<label class="radio_container">
			<input type="radio" name="YearCalendarF" value="B" checked>
			<div class="radio_mark">Birth</div>
		</label>
		
		<label class="radio_container">
			<input type="radio" name="YearCalendarF" value="C">
			<div class="radio_mark">Calendar</div>
		</label>
		</div>		
	</div>
	
	<div class="card_item">
	<div class="card_heading">Projected using CMI</div>
		<div class="card_subheading"> 
				<select id="ImpModelYear_F">
					<option value="2015">2015</option>
					<option value="2016">2016</option>
					<option value="2017" selected>2017</option>
					<option value="2018">2018</option>
				</select>
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Long Term Rate</div>
		<div class="card_subheading"> 
				<select id="ImpModelLTT_F">
					<option value=1>1%</option>
					<option value=1.25>1.25%</option>
					<option value=1.5 selected>1.5%</option>
					<option value=1.75>1.75%</option>
				</select>
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Smoothing factor</div>
		<div class="card_subheading"> 
				<select id="ImpModelSk_F">
					<option value=6.5>6.5</option>
					<option value=7>7</option>
					<option value=7.5 selected>7.5</option>
					<option value=8>8</option>
				</select>
		</div>	
	</div>	
	
	<div class="card_item">
	<div class="card_heading">Initial Addition</div>
		<div class="card_subheading"> 
				<select id="ImpModelA_F">
					<option value=0 selected>0</option>
					<option value=0.25>0.25</option>
					<option value=0.5>0.5</option>
					<option value=0.75>0.75</option>
					<option value=1>1</option>
				</select>
		</div>	
	</div>

	
		<!-- <input type="submit" value="UPDATE" class="btn" id="btn_update_5">	 -->
	
	</div>
</div>
<!-- End of card -->	

<!-- Card screen start -->
<div class="card card6">
<div class="card_header" id="screen6_home">&#8592; Other</div>
	<div class="card_body">
	<div class="card_item">
	<div class="card_heading">Spouses % on death</div>
		<div class="card_subheading"> 
			<div class="percentage_holder">
				<input type="number" id="SDAR" value=50 min="0" step="1" class="text_Input pc_Input">
				<span class="percentagePadding">%</span>	
			</div>
			
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Proportion married (Male)</div>
		<div class="card_subheading"> 
			<div class="percentage_holder">
				<input type="number" id="propM" value=100 min="0" max="100" step="1" class="text_Input pc_Input">
				<span class="percentagePadding">%</span>	
			</div>
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Proportion married (Female)</div>
		<div class="card_subheading"> 
			<div class="percentage_holder">
				<input type="number" id="propF" value=100 min="0" max="100" step="1" class="text_Input pc_Input">
				<span class="percentagePadding">%</span>	
			</div>
		</div>	
	</div>
	
	
	<div class="card_item">
	<div class="card_heading">Males older by</div>
		<div class="card_subheading"> 
		<input type="number" id="malesOlderBy" value=3 min="-10" max="10" class="text_Input">
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Guarantee</div>
		<div class="card_subheading"> 
		<input type="number" id="Guarantee" value=5 min="0" step="1" class="text_Input">
		</div>	
	</div>
	
	<div class="card_item">
	<div class="card_heading">Frequency</div>
		<div class="card_subheading"> 
		<input type="number" id="Frequency" value=12 min="0" step="1" class="text_Input">
		</div>	
	</div>	
	
	<div class="card_item">
		<div class="card_heading">Paid in advance</div>
		<div class="card_subheading"> 
		
		<label class="radio_container">
			<input type="radio" name="inAdvance" value="Yes" checked>
			<div class="radio_mark">Yes</div>
		</label>
		
		<label class="radio_container">
			<input type="radio" name="inAdvance" value="No">
			<div class="radio_mark">No</div>
		</label>
		</div>		
	</div>
	
	
	
	
	
		<!-- <input type="submit" value="UPDATE" class="btn" id="btn_update_6"> -->
	
	</div>
</div>
<!-- End of card -->

<!-- Card screen start -->
<div class="card card7">
<div class="card_header" id="screen7_home">&#8592; QR code</div>
	<div class="card_body">
	<div class="card_item">
	<div class="card_heading">QR code for inputs</div>
		<div class="card_subheading QR-content"> 
			<div id="qrcode"></div>
		</div>	
	</div>
	
	
	</div>
</div>
<!-- End of card -->






</div>
</div>
<!--
<div class="card_container2 standard">
<div class="card">

<div class="card_header">Useful links </div>

<div class="card_body">
	<div class="card_item">
		<div class="card_heading">Links</div>
		<div class="card_subheading">
		<ul>
		<li><a href="https://material.io/design/color/#tools-for-picking-colors">Material colors</a></li>
		<li><a href="https://cssgradient.io/">Color gradient generator</a></li>
		<li><a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">Flexbox guide</a></li>
		</ul>
		</div>
	
	</div>
	<div class="card_item">
		<div class="card_heading">Test</div>
		<div class="card_subheading">
		Test - why is this not 100% left aligned?
		
		</div>
	
	</div>
	
</div>
</div>

</div> -->
	<!-- End of card -->
	
	
</div>





</body>




<script>


document.getElementById("calculateAnnuity").addEventListener('click', function() {calculateAnnuity()});
document.getElementById("screen2").addEventListener('click', function() {moveRight(2)});
document.getElementById("screen3").addEventListener('click', function() {moveRight(3)});
document.getElementById("screen4").addEventListener('click', function() {moveRight(4)});
document.getElementById("screen5").addEventListener('click', function() {moveRight(5)});
document.getElementById("screen6").addEventListener('click', function() {moveRight(6)});
document.getElementById("screen2_home").addEventListener('click', function() {moveLeft()});
document.getElementById("screen3_home").addEventListener('click', function() {moveLeft()});
document.getElementById("screen4_home").addEventListener('click', function() {moveLeft()});
document.getElementById("screen5_home").addEventListener('click', function() {moveLeft()});
document.getElementById("screen6_home").addEventListener('click', function() {moveLeft()});

document.getElementById("screen7_home").addEventListener('click', function() {moveLeft()});


document.getElementById("menubutton").addEventListener('click', function() {toggleMenu()});

document.getElementById("close-menu").addEventListener('click', function() {closeMenu()});


document.getElementById("copybutton").addEventListener('click', function() {copytest()});


document.getElementById("generate-qr-click").addEventListener('click', function() {generateQR()});

document.getElementById("YOB").addEventListener('change', function() {updateAge()});


var info ={
		age:60,
		sex:0,
		annuityType:2,
		mortM:{
			basetable:"",
			baseYear:2000,
			ageRating:0,
			Loading:1,
			lx: Array(120-0+1),
			YOB:1990,
			CMI_model:2017,
			LTT:0.015,
			Sk:7.5,
			A:0,
			YearOrCalendar:"B"
		},
		mortF:{
			basetable:"",
			baseYear:2000,
			ageRating:0,
			Loading:1,
			lx: Array(120-0+1),
			YOB:1990,
			CMI_model:2017,
			LTT:0.015,
			Sk:7.5,
			A:0,
			YearOrCalendar:"B",
		},	
		propM:0.8,
		propF:0.7,
		malesOlderBy:3,
		SDAR:0.5,
		interest:0.04,
		escalation:0.03,
		guarantee:5,
		frequency:12,
		inAdvance:true,
	
	};


function updateAge(){
	var d = new Date();
	var currentYear = d.getFullYear();
	var yob = document.getElementById("YOB").value;
	 document.getElementById("YOB_detail").innerHTML = "Aged " + (currentYear - yob) + " in " + currentYear;
}

function toggleMenu(){
	document.getElementById("dropdown-content").classList.toggle("visible");
}

function closeMenu(){
	document.getElementById("dropdown-content").classList.remove("visible");
}

function generateQR(){
	
	//First part - remove any qxs
	var info_clone = JSON.parse(JSON.stringify(info));
	info_clone.mortM.lx=[];
	info_clone.mortF.lx=[];
	
	//TODO - consider encoding to make QR code easier / quicker to read - see below
	
	var s = '{"a":65,"s":0,"aT":2,"mM":{"b":"S2PMA","bY":2007,"aR":0,"L":1,"lx":[],"YOB":1965,"CM":"2017","LTT":"1.5","Sk":"7.5","A":"0","Y":"B"},"mF":{"b":"S2PFA","bY":2007,"aR":0,"L":1,"lx":[],"YOB":1968,"CM":"2017","LTT":"1.5","Sk":"7.5","A":"0","Y":"B"},"pM":1,"pF":1,"mO":3,"SD":0.5,"i":0.04,"e":0.02,"g":5,"f":12,"iA":true}';
	
	
	var qr_output = JSON.stringify(info_clone);
	
	document.getElementById("qrcode").innerHTML="";
	
	<!-- https://github.com/davidshimjs/qrcodejs -->
	
	var qrcode = new QRCode(document.getElementById("qrcode"), {
		text: qr_output,
		});

	
	
	
	
	moveRight(7);
	
	qr_output = "";
	info_clone = null;
	closeMenu();
}



function copytest(){
	var copy_String = info.age + '\r';
		copy_String += (info.sex == 0 ? info.mortM.YOB : info.mortF.YOB) + '\r';
		copy_String += (info.sex == 0 ? 'M' : 'F') + '\r';
		copy_String += info.annuityType  + '\r';
		
		//Male mortality string
		copy_String += info.mortM.basetable + "," + info.mortM.ageRating + "," + info.mortM.Loading + ";" ;
		

		switch(info.mortM.CMI_model){
		
		case "2015":
			copy_String += "CMI_" + info.mortM.CMI_model + "_" + info.mortM.LTT + "%" + "_0%" + "_M" + "," + info.mortM.YearOrCalendar + '\r';  //add Calendar year onto this
			break;
		case "2016":
			copy_String += "CMI_" + info.mortM.CMI_model + "_L" + info.mortM.LTT + "%" + "_S" + info.mortM.Sk +"_M" + "," + info.mortM.YearOrCalendar + '\r';  //add Calendar year onto this
			break;
		case "2017":
			copy_String += "CMI_" + info.mortM.CMI_model + "_L" + info.mortM.LTT + "%" + "_S" + info.mortM.Sk +"_M" + "," + info.mortM.YearOrCalendar + '\r';  //add Calendar year onto this
			break;
		case "2018":
			if(info.mortM.A == 0){
				copy_String += "CMI_" + info.mortM.CMI_model + "_L" + info.mortM.LTT + "%" + "_S" + info.mortM.Sk +"_M" + "," + info.mortM.YearOrCalendar + '\r';  //add Calendar year onto this
			}else{
			copy_String += "CMI_" + info.mortM.CMI_model + "_L" + info.mortM.LTT + "%" + "_S" + info.mortM.Sk + "_A" + info.mortM.A + "%" +"_M" + "," + info.mortM.YearOrCalendar + '\r';  //add Calendar year onto this
			
			}
			break;
			
		}
		

		//Female mortality string
		copy_String += info.mortF.basetable + "," + info.mortF.ageRating + "," + info.mortF.Loading + ";" ;
		
		switch(info.mortF.CMI_model){
		
		case "2015":
			copy_String += "CMI_" + info.mortF.CMI_model + "_" + info.mortF.LTT + "%" + "_0%" + "_F" + "," + info.mortF.YearOrCalendar  + '\r';  //add Calendar year onto this
			break;
		case "2016":
			copy_String += "CMI_" + info.mortF.CMI_model + "_L" + info.mortF.LTT + "%" + "_S" + info.mortF.Sk +"_F" + "," + info.mortF.YearOrCalendar + '\r';  //add Calendar year onto this
			break;
		case "2017":
			copy_String += "CMI_" + info.mortF.CMI_model + "_L" + info.mortF.LTT + "%" + "_S" + info.mortF.Sk +"_F" + "," + info.mortF.YearOrCalendar + '\r';  //add Calendar year onto this
			break;
		case "2018":
			if(info.mortM.A == 0){
			copy_String += "CMI_" + info.mortF.CMI_model + "_L" + info.mortF.LTT + "%" + "_S" + info.mortF.Sk +"_F" + "," + info.mortF.YearOrCalendar + '\r';  //add Calendar year onto this
			}else{
			copy_String += "CMI_" + info.mortF.CMI_model + "_L" + info.mortF.LTT + "%" + "_S" + info.mortF.Sk + "_A" + info.mortF.A + "%" +"_F" + "," + info.mortF.YearOrCalendar + '\r';  //add Calendar year onto this
			}
			break;
			
		}
		
		copy_String += info.propM  + '\r';
		copy_String += info.propF  + '\r';
		copy_String += info.malesOlderBy  + '\r';
		copy_String += info.SDAR  + '\r';
		copy_String += info.interest  + '\r';
		copy_String += info.escalation  + '\r';
		copy_String += info.guarantee  + '\r';
		copy_String += info.frequency  + '\r';
		copy_String += info.inAdvance;
	
		
	
	var  dummy = document.createElement("textarea");
	//dummy.style.display='none'
	document.body.appendChild(dummy);
	dummy.value=copy_String;
	dummy.select();
	document.execCommand("copy");
	document.body.removeChild(dummy);                                                                                   toggleMenu(); 
	
//	console.log("run");
//	console.log(dummy.value);
	
}



//Test onchange function
<!-- document.getElementById("YOB").addEventListener('change', function() {NotifyChange()}); -->

var Inputs = document.querySelectorAll("input");
for (index = 0; index < Inputs.length; ++index) {
    Inputs[index].addEventListener("change", NotifyChange);
}


var Selects = document.querySelectorAll("select");
for (index = 0; index < Selects.length; ++index) {
    Selects[index].addEventListener("change", NotifyChange);
}



function test(){
	alert("testing");	
}






function NotifyChange(){
	document.getElementById("calculateAnnuity").classList.add("change");
}



function updateVisibleScreens(screen){
	var elements = document.getElementsByClassName("card");
	var regex = new RegExp("card"+screen,"i");
	
	for(i=0;i<elements.length;i++){
		elements[i].classList.remove("hidden");
		
		if(elements[i].className.search(regex)>-1 || elements[i].className=="card card1"){
			//do nothing if matching, or if homescreen
		}else{
			//otherwise, add hidden tag
			elements[i].className+=" hidden";		
			}
	}
}

function moveRight(screen){
	
	closeMenu();
	updateVisibleScreens(screen);
	var e = document.getElementById("wrapper");
	e.className+=" slide-in";
}

function moveLeft(){
	displayAnnuityInputs();
	var e = document.getElementById("wrapper");
	e.classList.remove("slide-in");

	
	<!-- updateVisibleScreens(1); -->
}



function displayAnnuityInputs(){

		
		getAnnuityInputs(); 
		
//Update Member scenario
var member_scenario = (info.sex==0 ? "Male" + " born in " + info.mortM.YOB  : "Female" + " born in " + info.mortF.YOB) + ", ";

switch(info.annuityType){
	case 0:
		member_scenario+="Single life";
		break;
	case 1:
		member_scenario+="Reversionary";
		break;
	case 2:
		member_scenario+="Joint life";
		break;
}
member_scenario+=  " annuity from " + info.age;

 var e = document.getElementById("member_scenario");
 e.innerHTML = member_scenario;
//------------------------
 
 
 //Update financials

 
 var financials = "Discount rate: " + Number(Math.round(info.interest*100+'e2')+'e-2') + "%<br>" 
 financials+= "Pension increases: " + Number(Math.round(info.escalation*100+'e2')+'e-2') +"%";
 e = document.getElementById("financials");
 e.innerHTML = financials;
//------------------------ 
 
//Update Male Mortality

 var Male_Mortality = Number(Math.round(info.mortM.Loading*100+'e2')+'e-2') + "% of " + info.mortM.basetable + (info.mortM.ageRating !=0 ? " " + info.mortM.ageRating : "") ;
 
 
 //100% of <span class="accent">S2PA</span> YoB <span class="accent">CMI_2017</span> L=1.5% Sk=7.5
 <!-- var Male_Mortality = info.mortM.Loading * 100 + "% of " + info.mortM.basetable + (info.mortM.ageRating !=0 ? " " + info.mortM.ageRating : "") ; -->
 Male_Mortality+= (info.mortM.YearOrCalendar =="B" ? " YoB" : " Cal"); 
 Male_Mortality+= " CMI_" + info.mortM.CMI_model + " L=" + info.mortM.LTT +"%" 
 if(info.mortM.CMI_model >2015){Male_Mortality+=  " Sk=" + info.mortM.Sk;}
 if(info.mortM.CMI_model >=2018){Male_Mortality+=  " A=" + info.mortM.A;}
 
 e = document.getElementById("Male_Mortality");
 e.innerHTML = Male_Mortality;
//------------------------ 

//Update Female Mortality
 var Female_Mortality = Number(Math.round(info.mortF.Loading*100+'e2')+'e-2') + "% of " + info.mortF.basetable + (info.mortF.ageRating !=0 ? " " + info.mortF.ageRating : "") ;
 Female_Mortality+= (info.mortF.YearOrCalendar =="B" ? " YoB" : " Cal"); 
 Female_Mortality+= " CMI_" + info.mortF.CMI_model + " L=" + info.mortF.LTT +"%" 
 if(info.mortF.CMI_model >2015){Female_Mortality+=  " Sk=" + info.mortF.Sk;}
 if(info.mortF.CMI_model >=2018){Female_Mortality+=  " A=" + info.mortF.A;}
 e = document.getElementById("Female_Mortality");
 e.innerHTML = Female_Mortality;
//------------------------ 


var Other = "Spouses proportion: " + Number(Math.round(info.SDAR*100+'e2')+'e-2') + "%<br>";
Other+="Proportion married: " + Number(Math.round(info.propM*100+'e2')+'e-2') + "% (M) / " + Number(Math.round(info.propF*100+'e2')+'e-2') +"% (F)<br>";
Other+="Males older by: "  + info.malesOlderBy + " years" + "<br>";
Other+="Guarantee: " + info.guarantee + " years" + "<br>";
Other+="Frequency: " + info.frequency + "<br>";
Other+="In advance: " + (info.inAdvance ? "Yes": "No") + "<br>";
 e = document.getElementById("Other");
 e.innerHTML = Other;
 
}

function calculateAnnuity(){

	getAnnuityInputs();
	var s = document.getElementById("annuity_result");
	s.innerHTML = test_annuity(info.age, info.sex, info.annuityType, info.mortM, info.mortF, info.propM, info.propF, info.malesOlderBy, info.SDAR, info.interest, info.escalation, info.guarantee,info.frequency, info.inAdvance);
	//s.innerHTML="Result = " + test_function();
	document.getElementById("calculateAnnuity").classList.remove("change");

}

	
function getAnnuityInputs(){


	info.age = Number(document.getElementById("age").value);	
	
	var genders = document.getElementsByName("sex");
	
	for(i=0;i<2;i++){
		if(genders[i].checked){
			info.sex = Number(genders[i].value);
		}
	}
		
	//Get annuity type
	var e = document.getElementById("annuityType");
	info.annuityType = Number(e.options[e.selectedIndex].value);
	
	e = document.getElementById("mortM");
	//var mortM = e.options[e.selectedIndex].value;
	info.mortM.basetable = e.options[e.selectedIndex].value;
	info.mortM.ageRating = Number(document.getElementById("AgeRating_M").value);
	info.mortM.Loading = Number(document.getElementById("Qx_M").value)/100;

	
	e = document.getElementById("ImpModelYear_M");
	info.mortM.CMI_model = e.options[e.selectedIndex].value;
	
	e = document.getElementById("ImpModelLTT_M");
	info.mortM.LTT = e.options[e.selectedIndex].value;

	
	e = document.getElementById("ImpModelSk_M");
	info.mortM.Sk = e.options[e.selectedIndex].value;
	
	e = document.getElementById("ImpModelA_M");
	info.mortM.A = e.options[e.selectedIndex].value;
	
	e = document.getElementById("mortF");
	info.mortF.basetable = e.options[e.selectedIndex].value;
	info.mortF.ageRating = Number(document.getElementById("AgeRating_F").value);
	info.mortF.Loading = Number(document.getElementById("Qx_F").value)/100;
	
	e = document.getElementById("ImpModelYear_F");
	info.mortF.CMI_model = e.options[e.selectedIndex].value;

	e = document.getElementById("ImpModelLTT_F");
	info.mortF.LTT = e.options[e.selectedIndex].value;
	
	e = document.getElementById("ImpModelSk_F");
	info.mortF.Sk = e.options[e.selectedIndex].value;
	
	e = document.getElementById("ImpModelA_F");
	info.mortF.A = e.options[e.selectedIndex].value;
	
	
	
	
	//Get YOB or Calendar
	var BirthorCalendar = document.getElementsByName("YearCalendarM");
	for(i=0;i<2;i++){
		if(BirthorCalendar[i].checked){
			info.mortM.YearOrCalendar = BirthorCalendar[i].value;
		}
	}

	BirthorCalendar = document.getElementsByName("YearCalendarF");
		for(i=0;i<2;i++){
		if(BirthorCalendar[i].checked){
			info.mortF.YearOrCalendar = BirthorCalendar[i].value;
		}
	}
	
	//Get proportion married
	info.propM = Number(document.getElementById("propM").value)/100;
	info.propF = Number(document.getElementById("propF").value)/100;
	
	//Get Males older by
	info.malesOlderBy = Number(document.getElementById("malesOlderBy").value);
	
	//Get YOB
	var YOB = Number(document.getElementById("YOB").value);
	if(info.sex==0){ //if male
		info.mortM.YOB = YOB;
		info.mortF.YOB = YOB + info.malesOlderBy;
	}else{
		info.mortF.YOB = YOB;
		info.mortM.YOB = YOB - info.malesOlderBy;			
	}

	
	//Get SDAR
	info.SDAR = Number(document.getElementById("SDAR").value)/100;

	//Get Interest
	info.interest = Number(document.getElementById("Int").value)/100;
	
	//Get Escalation
	info.escalation = Number(document.getElementById("Esc").value)/100;
	
	//Get Guarantee
	info.guarantee = Number(document.getElementById("Guarantee").value);

	//Get Frequency
	info.frequency = Number(document.getElementById("Frequency").value);
	
	//Get inAdvance choice
	var inAdvanceOptions = document.getElementsByName("inAdvance");
	var inAdvance;
	for(i=0;i<2;i++){
		if(inAdvanceOptions[i].checked){
			info.inAdvance = inAdvanceOptions[i].value==="Yes";
		}
	}

	return info;
	
	}




</script>


</html>